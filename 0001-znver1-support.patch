From 041515c31967806fbdfa5ceb2175052df188a321 Mon Sep 17 00:00:00 2001
From: Gabriel Craciunescu <crazy@frugalware.org>
Date: Tue, 29 Jan 2019 16:02:28 +0100
Subject: [PATCH] znver1 support

 Added znver1 support.
 Fixes https://issues.openmandriva.org/show_bug.cgi?id=2422
---
 dnfdragora/backend.py | 2 +-
 dnfdragora/const.py   | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/dnfdragora/backend.py b/dnfdragora/backend.py
index 486a762..20de904 100644
--- a/dnfdragora/backend.py
+++ b/dnfdragora/backend.py
@@ -135,7 +135,7 @@ class ArchFilter(BaseFilter):
 
     def __init__(self, name, active=False):
         BaseFilter.__init__(self, name, active)
-        self.archs = ['noarch', 'i586', 'i686', 'x86_64', 'armv5tl', 'armv6hl', 'armv7hl', 'aarch64', 'ppc64', 'ppc64le', 's390x']
+        self.archs = ['noarch', 'i586', 'i686', 'znver1_32', 'x86_64', 'znver1', 'armv5tl', 'armv6hl', 'armv7hl', 'aarch64', 'ppc64', 'ppc64le', 's390x']
 
     def run(self, pkgs):
         BaseFilter.run(self, pkgs)
diff --git a/dnfdragora/const.py b/dnfdragora/const.py
index 96eede5..0139693 100644
--- a/dnfdragora/const.py
+++ b/dnfdragora/const.py
@@ -44,8 +44,8 @@ ARCH = subprocess.check_output(
     '/usr/bin/rpm --eval %_arch', shell=True).decode("utf-8")[:-1]
 
 ARCH_DICT = {
-    "x86_64": set(['x86_64', 'i686', 'i586', 'i386', 'noarch']),
-    "i586": set(['i686', 'i586', 'i386', 'noarch']),
+    "x86_64": set(['x86_64', 'znver1', 'i686', 'i586', 'i386', 'noarch']),
+    "i586": set(['i686', 'i586', 'i386', 'znver1_32', 'noarch']),
     "arm": set(['armv7hl', 'noarch'])
 }
 
-- 
2.20.1

